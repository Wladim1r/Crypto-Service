  –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞: Crypto-Service

  ---

  –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

  Crypto-Service ‚Äî —ç—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ –Ω–∞ Go –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–Ω–æ–≥–æ –ø–æ—Ä—Ç—Ñ–µ–ª—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.
  –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è, –≤—Ö–æ–¥–∏—Ç—å –≤ —Å–∏—Å—Ç–µ–º—É, —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–≤–æ–∏–º –ø–æ—Ä—Ç—Ñ–µ–ª–µ–º –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç –∏ –Ω–∞–±–ª—é–¥–∞—Ç—å –∑–∞ –µ–≥–æ —Å—Ç–æ–∏–º–æ—Å—Ç—å—é —á–µ—Ä–µ–∑
  live-websocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.

  –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–ª–µ–¥—É–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω—É Backend-for-Frontend (BFF), –≥–¥–µ —Å–µ—Ä–≤–∏—Å Profile –≤—ã—Å—Ç—É–ø–∞–µ—Ç –≤ –∫–∞—á–µ—Å—Ç–≤–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —à–ª—é–∑–∞ –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å
  –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º. –°–∏—Å—Ç–µ–º–∞ —Ä–∞–∑–¥–µ–ª–µ–Ω–∞ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤, –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–≤–æ—é —Ñ—É–Ω–∫—Ü–∏—é, —Ç–∞–∫—É—é –∫–∞–∫ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è,
  –∞–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏. –¢–∞–∫–æ–π –¥–∏–∑–∞–π–Ω –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏. –ü—Ä–æ–µ–∫—Ç —Ç–∞–∫–∂–µ
  –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è (–≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –æ—Ç–∫–ª—é—á–µ–Ω–Ω—ã–π) –∫–æ–Ω–≤–µ–π–µ—Ä –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å–±–æ—Ä–∞ –∏ –∞–Ω–∞–ª–∏–∑–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö —Ä—ã–Ω–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Kafka –∏
  ClickHouse.

  ---

  –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

  –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å —Å–µ—Ä–≤–∏—Å–æ–º Profile, –∫–æ—Ç–æ—Ä—ã–π –æ—Ä–≥–∞–Ω–∏–∑—É–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –¥—Ä—É–≥–∏–º –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º.

   1. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –∏–ª–∏ –≤—Ö–æ–¥–∏—Ç –≤ —Å–∏—Å—Ç–µ–º—É —á–µ—Ä–µ–∑ REST API —Å–µ—Ä–≤–∏—Å–∞ Profile. Profile –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –≤ —Å–µ—Ä–≤–∏—Å
      Authorization –ø–æ gRPC. Authorization –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ —Å–≤–æ–µ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö PostgreSQL, —Å–æ–∑–¥–∞–µ—Ç —Å–µ—Å—Å–∏—é –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JWT (access –∏
      refresh —Ç–æ–∫–µ–Ω—ã). Refresh-—Ç–æ–∫–µ–Ω —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö http-only cookie.

   2. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ä—Ç—Ñ–µ–ª–µ–º: –ü–æ—Å–ª–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å, –æ–±–Ω–æ–≤–ª—è—Ç—å –∏–ª–∏ —É–¥–∞–ª—è—Ç—å –º–æ–Ω–µ—Ç—ã –∏–∑ —Å–≤–æ–µ–≥–æ –ø–æ—Ä—Ç—Ñ–µ–ª—è —á–µ—Ä–µ–∑ API —Å–µ—Ä–≤–∏—Å–∞
      Profile. –≠—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö postgres-profile.

   3. –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –¥–∞–Ω–Ω—ã–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏:
       * –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–±–∞–≤–ª—è–µ—Ç –º–æ–Ω–µ—Ç—É –≤ –ø–æ—Ä—Ç—Ñ–µ–ª—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, BTCUSDT), —Å–µ—Ä–≤–∏—Å Profile –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç HTTP-–∑–∞–ø—Ä–æ—Å –≤ —Å–µ—Ä–≤–∏—Å Aggregator, –¥–∞–≤–∞—è
         –µ–º—É —É–∫–∞–∑–∞–Ω–∏–µ –Ω–∞—á–∞—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —ç—Ç–æ–π –º–æ–Ω–µ—Ç—ã.
       * –ö–ª–∏–µ–Ω—Ç—Å–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç websocket-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å —Å–µ—Ä–≤–∏—Å–æ–º Profile.
       * ConnectionManager –≤ —Å–µ—Ä–≤–∏—Å–µ Profile —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç —ç—Ç–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏ –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π Pub/Sub –∫–∞–Ω–∞–ª –≤ Redis (–Ω–∞–ø—Ä–∏–º–µ—Ä,
         btcusdt).

   4. –ê–≥—Ä–µ–≥–∞—Ü–∏—è –∏ —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö:
       * –°–µ—Ä–≤–∏—Å Aggregator –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –Ω—É–∂–Ω–æ–≥–æ —Å–∏–º–≤–æ–ª–∞ —É —Å–µ—Ä–≤–∏—Å–∞ Socket —á–µ—Ä–µ–∑ gRPC.
       * –°–µ—Ä–≤–∏—Å Socket —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ websocket-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –≤–Ω–µ—à–Ω–∏–º API –∫—Ä–∏–ø—Ç–æ–±–∏—Ä–∂–∏. –û–Ω –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∏
         –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ.
       * –ù–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ —Ä—ã–Ω–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (—Å–¥–µ–ª–∫–∏, —Ç–∏–∫–µ—Ä—ã) –ø–æ—Å—Ç—É–ø–∞—é—Ç –æ—Ç –±–∏—Ä–∂–∏ –≤ Socket, –∫–æ—Ç–æ—Ä—ã–π –∑–∞—Ç–µ–º —Å—Ç—Ä–∏–º–∏—Ç –∏—Ö –≤ Aggregator.
       * Aggregator –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ, –≤—ã—á–∏—Å–ª—è–µ—Ç –µ–∂–µ—Å–µ–∫—É–Ω–¥–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ü–µ–Ω –∏ –ø—É–±–ª–∏–∫—É–µ—Ç –∏—Ö –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π Pub/Sub –∫–∞–Ω–∞–ª Redis.

   5. –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏:
       * ConnectionManager —Å–µ—Ä–≤–∏—Å–∞ Profile –ø–æ–ª—É—á–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω—ã –∏–∑ –∫–∞–Ω–∞–ª–∞ Redis.
       * –û–Ω –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ—Ä—Ç—Ñ–µ–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–æ–Ω–µ—Ç * –Ω–æ–≤–∞—è —Ü–µ–Ω–∞).
       * –ù–∞–∫–æ–Ω–µ—Ü, –æ–Ω –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω—ã–π –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≤–∏–¥–µ JSON-—Å–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ –µ–≥–æ websocket-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç UI
         –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

  ---

  –û—Å–Ω–æ–≤–Ω—ã–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã

  1. –°–µ—Ä–≤–∏—Å Profile (BFF)
   * –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏: Go, Gin (HTTP Framework), GORM, Websockets, Redis, gRPC (–∫–ª–∏–µ–Ω—Ç).
   * –û–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏:
       * –í—ã—Å—Ç—É–ø–∞–µ—Ç –≤ —Ä–æ–ª–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ API-—à–ª—é–∑–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
       * –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç HTTP-–∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ä—Ç—Ñ–µ–ª–µ–º).
       * –î–µ–ª–µ–≥–∏—Ä—É–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é —Å–µ—Ä–≤–∏—Å—É Authorization.
       * –£–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–æ—Ñ–∏–ª—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∏—Ö –ø–æ—Ä—Ç—Ñ–µ–ª—è–º–∏ –≤ —Å–≤–æ–µ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö postgres-profile.
       * –û—Ä–≥–∞–Ω–∏–∑—É–µ—Ç –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö, —É–∫–∞–∑—ã–≤–∞—è —Å–µ—Ä–≤–∏—Å—É Aggregator, –∫–∞–∫–∏–µ –ø–æ—Ç–æ–∫–∏ –º–æ–Ω–µ—Ç –Ω—É–∂–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å.
       * –£–ø—Ä–∞–≤–ª—è–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–º–∏ websocket-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏ –∏ –¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ—Ä—Ç—Ñ–µ–ª—è –∫–ª–∏–µ–Ω—Ç–∞–º –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

  2. –°–µ—Ä–≤–∏—Å Authorization
   * –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏: Go, gRPC, GORM, JWT.
   * –û–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏:
       * –í—ã–¥–µ–ª–µ–Ω–Ω—ã–π gRPC-—Å–µ—Ä–≤–∏—Å –¥–ª—è –∑–∞–¥–∞—á –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.
       * –£–ø—Ä–∞–≤–ª—è–µ—Ç —É—á–µ—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–∏–º—è, —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å) –≤ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö postgres-auth.
       * –í—ã–ø—É—Å–∫–∞–µ—Ç, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç JSON Web Tokens (JWT).
       * –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç gRPC-–º–µ—Ç–æ–¥—ã Register, Login, Logout –∏ Refresh.

  3. –°–µ—Ä–≤–∏—Å Aggregator
   * –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏: Go, Redis (Pub/Sub), gRPC (–∫–ª–∏–µ–Ω—Ç).
   * –û–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏:
       * –ö–æ–Ω–≤–µ–π–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–ª—É—á–∞–µ—Ç –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç —Å–µ—Ä–≤–∏—Å–∞ Socket.
       * –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã —Ä—ã–Ω–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–¥–µ–ª–∫–∏, –º–∏–Ω–∏-—Ç–∏–∫–µ—Ä—ã).
       * –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –µ–∂–µ—Å–µ–∫—É–Ω–¥–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ü–µ–Ω (SecondStat) –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º–æ–≥–æ —Å–∏–º–≤–æ–ª–∞.
       * –¢—Ä–∞–Ω—Å–ª–∏—Ä—É–µ—Ç —ç—Ç–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ü–µ–Ω –≤ Redis Pub/Sub –∫–∞–Ω–∞–ª—ã, –Ω–∞–∑–≤–∞–Ω–Ω—ã–µ –≤ —á–µ—Å—Ç—å —Å–∏–º–≤–æ–ª–∞ –º–æ–Ω–µ—Ç—ã.
       * –£–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–¥–ø–∏—Å–∫–∞–º–∏ –Ω–∞ –ø–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –æ—Å–Ω–æ–≤–µ —É–ø—Ä–∞–≤–ª—è—é—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç —Å–µ—Ä–≤–∏—Å–∞ Profile.

  4. –°–µ—Ä–≤–∏—Å Socket
   * –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏: Go, Gorilla Websocket, gRPC.
   * –û–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏:
       * –í—ã—Å—Ç—É–ø–∞–µ—Ç –≤ —Ä–æ–ª–∏ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ–≥–æ –ø—Ä–æ–∫—Å–∏ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö websocket API.
       * –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –ª–æ–≥–∏–∫–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.
       * –ê–±—Å—Ç—Ä–∞–≥–∏—Ä—É–µ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã —Å –≤–Ω–µ—à–Ω–∏–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —á–∏—Å—Ç—ã–π –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π gRPC-—Å—Ç—Ä–∏–º –¥–ª—è –¥—Ä—É–≥–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤.

  ---

  –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏ –æ–±–º–µ–Ω —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏

   * PostgreSQL:
       * `postgres-auth`: –í—ã–¥–µ–ª–µ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å–µ—Ä–≤–∏—Å–∞ Authorization, –±–µ–∑–æ–ø–∞—Å–Ω–æ —Ö—Ä–∞–Ω—è—â–∞—è —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
       * `postgres-profile`: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å–µ—Ä–≤–∏—Å–∞ Profile, —Ö—Ä–∞–Ω—è—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ—Ñ–∏–ª—è—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∏—Ö –ø–æ—Ä—Ç—Ñ–µ–ª—è—Ö.
   * Redis: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –≤—ã—Å–æ–∫–æ—Å–∫–æ—Ä–æ—Å—Ç–Ω–∞—è —à–∏–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –ø–∞–º—è—Ç–∏. –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—é –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –º–µ–∂–¥—É Aggregator (–∏–∑–¥–∞—Ç–µ–ª—å)
     –∏ Profile (–ø–æ–¥–ø–∏—Å—á–∏–∫) —á–µ—Ä–µ–∑ –º–µ—Ö–∞–Ω–∏–∑–º Pub/Sub.

  ---

  –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–Ω–≤–µ–π–µ—Ä (–æ—Ç–∫–ª—é—á–µ–Ω)

  –§–∞–π–ª compose.yaml —Å–æ–¥–µ—Ä–∂–∏—Ç –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π, –Ω–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–Ω–≤–µ–π–µ—Ä:
   * Kafka: –ü—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∫–∞—á–µ—Å—Ç–≤–µ –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–π, –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–π –æ—á–µ—Ä–µ–¥–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è —Å–±–æ—Ä–∞ –≤—Å–µ—Ö —Ä—ã–Ω–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑
     Aggregator.
   * ClickHouse: –ö–æ–ª–æ–Ω–æ—á–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö, –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–ª—è OLAP-–∑–∞–ø—Ä–æ—Å–æ–≤, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö —Ä—ã–Ω–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.
   * –°–µ—Ä–≤–∏—Å Kafka-ClickHouse: –ü—Ä–æ—Å—Ç–æ–π ETL-—Å–µ—Ä–≤–∏—Å –¥–ª—è —á—Ç–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ Kafka –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö –ø–∞–∫–µ—Ç–Ω—ã—Ö –≤—Å—Ç–∞–≤–æ–∫ –≤ ClickHouse.
   * –°–µ—Ä–≤–∏—Å ClickHouse-Dashboard: –í–µ–±-–ø–∞–Ω–µ–ª—å –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö, —Ö—Ä–∞–Ω—è—â–∏—Ö—Å—è –≤ ClickHouse.



  –î–µ—Ç–∞–ª—å–Ω–æ–µ —Ä–µ–∑—é–º–µ –ø—Ä–æ–µ–∫—Ç–∞: Crypto-Service

  ---

  1. –û–±—â–∞—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

  Crypto-Service ‚Äî —ç—Ç–æ –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–Ω—ã—Ö –ø–æ—Ä—Ç—Ñ–µ–ª–µ–π, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –Ω–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
  Go. –û–Ω–∞ —Ä–∞–∑–¥–µ–ª—è–µ—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –Ω–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ, —Å–ª–∞–±–æ—Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º —á–µ—Ä–µ–∑ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ (gRPC, HTTP) –∏
  –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ (Redis Pub/Sub, Kafka) –ø—Ä–æ—Ç–æ–∫–æ–ª—ã.

  –°–∏—Å—Ç–µ–º–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–Ω—Ç—É—Ä–æ–≤:
   1. –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –∫–æ–Ω—Ç—É—Ä (Real-Time): –û—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ä—Ç—Ñ–µ–ª—è–º–∏ –∏ –¥–æ—Å—Ç–∞–≤–∫—É —Ü–µ–Ω–æ–≤—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º
      –≤—Ä–µ–º–µ–Ω–∏ —á–µ—Ä–µ–∑ Websockets.
   2. –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç—É—Ä (Data Pipeline): –û—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–±–æ—Ä, –ø–µ—Ä–µ–¥–∞—á—É –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö —Ä—ã–Ω–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –∞–Ω–∞–ª–∏–∑–∞.

  ---

  2. –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ –∏ –∏—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π

  –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –∫–æ–Ω—Ç—É—Ä

  ##### Profile Service (BFF)
   - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —É–∑–µ–ª, API-—à–ª—é–∑ –¥–ª—è –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π.
   - –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏: Go, Gin, GORM, Websockets.
   - –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è:
       - –í—Ö–æ–¥—è—â–∏–µ:
           - HTTP/REST API (–ø–æ—Ä—Ç :8080) –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤ (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –ª–æ–≥–∏–Ω, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ä—Ç—Ñ–µ–ª–µ–º).
           - Websocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π.
       - –ò—Å—Ö–æ–¥—è—â–∏–µ:
           - gRPC –∫–ª–∏–µ–Ω—Ç –∫ Authorization Service –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.
           - HTTP –∫–ª–∏–µ–Ω—Ç –∫ Aggregator Service –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∞–º–∏ –Ω–∞ —Ç–∏–∫–µ—Ä—ã.
           - PostgreSQL –∫–ª–∏–µ–Ω—Ç –∫ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö postgres-profile.
           - Redis –∫–ª–∏–µ–Ω—Ç (Pub/Sub) –¥–ª—è –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ —Ü–µ–Ω–æ–≤—ã–µ –∫–∞–Ω–∞–ª—ã.
   - –ö–ª—é—á–µ–≤—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:
       - models.UserRequest ({name, password}): –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏/–≤—Ö–æ–¥–∞.
       - models.CoinRequest ({symbol, quantity}): –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–æ–Ω–µ—Ç–∞–º–∏.
       - models.Profile: –ü–æ–ª–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç—å—é, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã–π –ø–æ Websocket.

  ##### Authorization Service
   - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π.
   - –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏: Go, gRPC, GORM, JWT.
   - –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è:
       - –í—Ö–æ–¥—è—â–∏–µ: gRPC —Å–µ—Ä–≤–µ—Ä (–ø–æ—Ä—Ç :50051) –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –æ—Ç Profile Service.
       - –ò—Å—Ö–æ–¥—è—â–∏–µ: PostgreSQL –∫–ª–∏–µ–Ω—Ç –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö postgres-auth.
   - –ö–ª—é—á–µ–≤—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:
       - auth.AuthRequest ({Name, Password}): –í—Ö–æ–¥—è—â–∏–π gRPC-–∑–∞–ø—Ä–æ—Å.
       - auth.TokenResponse ({Access, Refresh}): –ò—Å—Ö–æ–¥—è—â–∏–π gRPC-–æ—Ç–≤–µ—Ç —Å —Ç–æ–∫–µ–Ω–∞–º–∏.
       - models.User, models.RefreshToken: GORM-–º–æ–¥–µ–ª–∏ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ë–î.

  ##### Aggregator Service
   - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ê–≥—Ä–µ–≥–∞—Ü–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä—ã–Ω–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.
   - –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏: Go, Redis, Kafka, gRPC (–∫–ª–∏–µ–Ω—Ç).
   - –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è:
       - –í—Ö–æ–¥—è—â–∏–µ:
           - HTTP —Å–µ—Ä–≤–µ—Ä (–ø–æ—Ä—Ç :8088) –¥–ª—è —É–ø—Ä–∞–≤–ª—è—é—â–∏—Ö –∫–æ–º–∞–Ω–¥ –æ—Ç Profile Service.
           - gRPC –∫–ª–∏–µ–Ω—Ç, –ø–æ–ª—É—á–∞—é—â–∏–π —Å—Ç—Ä–∏–º—ã –æ—Ç Socket Service.
       - –ò—Å—Ö–æ–¥—è—â–∏–µ:
           - Redis Pub/Sub –∏–∑–¥–∞—Ç–µ–ª—å: –ø—É–±–ª–∏–∫—É–µ—Ç SecondStat –≤ –∫–∞–Ω–∞–ª—ã, –Ω–∞–∑–≤–∞–Ω–Ω—ã–µ –ø–æ –∏–º–µ–Ω–∏ —Å–∏–º–≤–æ–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, btcusdt).
           - Kafka –ø—Ä–æ–¥—é—Å–µ—Ä: –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç KafkaMsg –≤ —Ç–æ–ø–∏–∫ binance.miniticker.
   - –ö–ª—é—á–µ–≤—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:
       - models.AggTrade, models.MiniTicker: —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ —Å—ã—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö.
       - models.SecondStat ({Symbol, Price}): –µ–∂–µ—Å–µ–∫—É–Ω–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è Redis.
       - models.KafkaMsg: –æ–±–æ–≥–∞—â–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Kafka.

  ##### Socket Service
   - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ü—Ä–æ–∫—Å–∏-–∞–¥–∞–ø—Ç–µ—Ä –∫ –≤–Ω–µ—à–Ω–∏–º Websocket-–∏—Å—Ç–æ—á–Ω–∏–∫–∞–º.
   - –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏: Go, Gorilla Websocket, gRPC.
   - –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è:
       - –í—Ö–æ–¥—è—â–∏–µ: gRPC —Å–µ—Ä–≤–µ—Ä (–ø–æ—Ä—Ç :50051, –≤ –∫–æ–º–ø–æ—É–∑–µ :50052) –æ—Ç–¥–∞–µ—Ç —Å—Ç—Ä–∏–º—ã Aggregator Service.
       - –ò—Å—Ö–æ–¥—è—â–∏–µ: Websocket –∫–ª–∏–µ–Ω—Ç—ã –∫ –≤–Ω–µ—à–Ω–∏–º API (–Ω–∞–ø—Ä–∏–º–µ—Ä, Binance). –£–ø—Ä–∞–≤–ª—è–µ—Ç –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è–º–∏.
   - –ö–ª—é—á–µ–≤—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:
       - socket.RawResponse ({Data: []byte}): gRPC-—Å–æ–æ–±—â–µ–Ω–∏–µ, —Å–æ–¥–µ—Ä–∂–∞—â–µ–µ —Å—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ Websocket.

  –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç—É—Ä

  ##### Kafka-ClickHouse Service
   - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: ETL-—Å–µ—Ä–≤–∏—Å –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ Kafka –≤ ClickHouse.
   - –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏: Go, segmentio/kafka-go, clickhouse-go.
   - –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è:
       - Kafka –∫–æ–Ω—Å—å—é–º–µ—Ä: —á–∏—Ç–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ —Ç–æ–ø–∏–∫–∞ binance.miniticker.
       - ClickHouse –∫–ª–∏–µ–Ω—Ç: –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–∞–∫–µ—Ç–Ω—ã–µ –≤—Å—Ç–∞–≤–∫–∏ (BatchInsert) –≤ —Ç–∞–±–ª–∏—Ü—É market_tickers.
   - –ö–ª—é—á–µ–≤—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:
       - models.KafkaMsg: —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –≤ –∫–æ—Ç–æ—Ä—É—é –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑—É–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ Kafka.

  –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –±—Ä–æ–∫–µ—Ä—ã —Å–æ–æ–±—â–µ–Ω–∏–π
   - PostgreSQL: –î–≤–µ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –ë–î –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª–µ–π –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.
   - Redis: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –±—ã—Å—Ç—Ä–∞—è —à–∏–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è real-time –∫–æ–Ω—Ç—É—Ä–∞.
   - Kafka/Zookeeper: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–∞—è, –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–∞—è –æ—á–µ—Ä–µ–¥—å –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–Ω—Ç—É—Ä–∞.
   - ClickHouse: –ö–æ–ª–æ–Ω–æ—á–Ω–∞—è –°–£–ë–î –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –±—ã—Å—Ç—Ä–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö.

  ---

  3. –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç

  –ü—Ä–µ—Ä–µ–∫–≤–∏–∑–∏—Ç—ã: –ù–∞ –≤–∞—à–µ–π –º–∞—à–∏–Ω–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã Docker –∏ Docker Compose.

  –ó–∞–ø—É—Å–∫:
   1. –ö–æ–Ω—Ñ–ª–∏–∫—Ç –ø–æ—Ä—Ç–æ–≤: –í —Ñ–∞–π–ª–µ compose.yaml —Å–µ—Ä–≤–∏—Å—ã profile –∏ kafka-ui –æ–±–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø–æ—Ä—Ç 8080. –ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –∏–∑–º–µ–Ω–∏—Ç–µ –æ–¥–∏–Ω –∏–∑ –Ω–∏—Ö. –ù–∞–ø—Ä–∏–º–µ—Ä,
      –¥–ª—è kafka-ui:

   1     # –í —Å–µ—Ä–≤–∏—Å–µ kafka-ui
   2     ports:
   3       - "8084:8080" # –ò–∑–º–µ–Ω–µ–Ω–æ —Å 8080 –Ω–∞ 8084
   2. –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞.
   3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É –¥–ª—è —Å–±–æ—Ä–∫–∏ –∏ –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:

   1     docker-compose up --build
   4. –°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–∑–≤–µ—Ä–Ω–µ—Ç—Å—è. –õ–æ–≥–∏ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –±—É–¥—É—Ç –≤—ã–≤–æ–¥–∏—Ç—å—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å.

  –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:
   - API —Å–µ—Ä–≤–∏—Å–∞ `Profile`: http://localhost:8080
   - Redis Commander (UI –¥–ª—è Redis): http://localhost:8081 (–ª–æ–≥–∏–Ω: admin, –ø–∞—Ä–æ–ª—å: admin)
   - Tabix (UI –¥–ª—è ClickHouse): http://localhost:8082
   - ClickHouse Dashboard (–∫–∞—Å—Ç–æ–º–Ω—ã–π): http://localhost:8083
   - Kafka UI: http://localhost:8084 (–∏–ª–∏ –ø–æ—Ä—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤—ã –Ω–∞—Å—Ç—Ä–æ–∏–ª–∏)

  ---

  4. –ü–æ—à–∞–≥–æ–≤–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é (User Scenarios)

  –®–∞–≥ 1: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
  –û—Ç–ø—Ä–∞–≤—å—Ç–µ POST –∑–∞–ø—Ä–æ—Å –Ω–∞ http://localhost:8080/v1/register —Å–æ —Å–ª–µ–¥—É—é—â–∏–º —Ç–µ–ª–æ–º:
   1 {
   2     "name": "myuser",
   3     "password": "mypassword123"
   4 }

  –®–∞–≥ 2: –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
  –û—Ç–ø—Ä–∞–≤—å—Ç–µ POST –∑–∞–ø—Ä–æ—Å –Ω–∞ http://localhost:8080/v1/login —Å —Ç–µ–º–∏ –∂–µ —É—á–µ—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏. –í –æ—Ç–≤–µ—Ç–µ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ access_token. refreshToken –±—É–¥–µ—Ç
  —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ http-only cookie.

   1 {
   2     "message": "Login successful üëÖüç≠",
   3     "üåê Here is your tokens": {
   4         "access": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
   5         "refresh": "..."
   6     }
   7 }
  –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ `access_token`. –û–Ω –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.

  –®–∞–≥ 3: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–æ–Ω–µ—Ç –≤ –ø–æ—Ä—Ç—Ñ–µ–ª—å
  –û—Ç–ø—Ä–∞–≤—å—Ç–µ POST –∑–∞–ø—Ä–æ—Å –Ω–∞ http://localhost:8080/v2/coin/symbol, —É–∫–∞–∑–∞–≤ –≤–∞—à access_token –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ Authorization.

  –ó–∞–≥–æ–ª–æ–≤–æ–∫: Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
  –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:
   1 {
   2     "symbol": "btcusdt",
   3     "quantity": 1.5
   4 }
  –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –¥–ª—è –¥—Ä—É–≥–∏—Ö –º–æ–Ω–µ—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, ethusdt, solusdt).

  –®–∞–≥ 4: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Websocket –¥–ª—è Real-Time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
  –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª—é–±–æ–π websocket-–∫–ª–∏–µ–Ω—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, wscat –∏–ª–∏ Postman) –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ ws://localhost:8080/v2/user/profile/ws. –ü—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏
  –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–µ—Ä–µ–¥–∞—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.

  –ü—Ä–∏–º–µ—Ä —Å wscat:

   1 wscat -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..." -c ws://localhost:8080/v2/user/profile/ws

  –°—Ä–∞–∑—É –ø–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤—ã –Ω–∞—á–Ω–µ—Ç–µ –ø–æ–ª—É—á–∞—Ç—å JSON-—Å–æ–æ–±—â–µ–Ω–∏—è —Å –ø–æ–ª–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –≤–∞—à–µ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ü–µ–Ω—ã –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã—Ö –º–æ–Ω–µ—Ç.
  –ü—Ä–∏–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è:

    1 {
    2     "ID": 1,
    3     "Name": "myuser",
    4     "Coins": {
    5         "Quantities": {
    6             "btcusdt": 1.5
    7         },
    8         "Prices": {
    9             "btcusdt": 68123.45
   10         },
   11         "Totals": {
   12             "btcusdt": 102185.175
   13         }
   14     }
   15 }

  ---

  5. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
   - Kafka UI (`localhost:8084`): –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Ç–æ–ø–∏–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, binance.miniticker), —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –Ω–∏—Ö –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–Ω—Å—å—é–º–µ—Ä–æ–≤.
   - Redis Commander (`localhost:8081`): –ú–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ Pub/Sub –∫–∞–Ω–∞–ª—ã (–ø–æ—è–≤—è—Ç—Å—è –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –º–æ–Ω–µ—Ç –≤ –ø–æ—Ä—Ç—Ñ–µ–ª—å) –∏ –¥—Ä—É–≥–∏–µ –¥–∞–Ω–Ω—ã–µ –≤
     Redis.
   - Tabix (`localhost:8082`): –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è ClickHouse. –ú–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å SQL-–∑–∞–ø—Ä–æ—Å—ã –∫ —Ç–∞–±–ª–∏—Ü–µ crypto.market_tickers –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
     –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö.
   - ClickHouse Dashboard (`localhost:8083`): –ü—Ä–æ—Å—Ç–∞—è –ø–∞–Ω–µ–ª—å –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 100 –∑–∞–ø–∏—Å–µ–π, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –≤ ClickHouse.
